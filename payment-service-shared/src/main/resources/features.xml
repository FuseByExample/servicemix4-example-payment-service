<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~ Copyright 2010 FuseSource
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<features>
    <repository>mvn:org.apache.servicemix/apache-servicemix/${servicemix.version}/xml/features</repository>
    <repository>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</repository>

    <feature name='payment-service-bank1' version='${project.version}'>
        <feature version="${servicemix.version}">camel-nmr</feature>
        <feature version="${camel.version}">camel-jaxb</feature>
        <bundle>mvn:org.fusesource.examples/payment-service-shared/${project.version}</bundle>
        <bundle>mvn:org.fusesource.examples/payment-service-bank1/${project.version}</bundle>
    </feature>

    <feature name='payment-service-bank2' version='${project.version}'>
        <feature version="${servicemix.version}">camel-nmr</feature>
        <feature version="${camel.version}">camel-jaxb</feature>
        <bundle>mvn:org.fusesource.examples/payment-service-shared/${project.version}</bundle>
        <bundle>mvn:org.fusesource.examples/payment-service-bank2/${project.version}</bundle>
    </feature>

    <feature name='payment-service-router' version='${project.version}'>
        <feature version="${servicemix.version}">camel-nmr</feature>
        <feature version="${camel.version}">camel-jaxb</feature>
        <bundle>mvn:org.fusesource.examples/payment-service-shared/${project.version}</bundle>
        <bundle>mvn:org.fusesource.examples/payment-service-router/${project.version}</bundle>
    </feature>

    <feature name='payment-service-ws' version='${project.version}'>
        <feature version="${servicemix.version}">camel-nmr</feature>

<!--
        <feature version="${camel.version}">camel-cxf</feature>
-->
        <feature version="${camel.version}">camel-cxf-patch</feature>

        <feature version="${camel.version}">camel-jaxb</feature>
        <bundle>mvn:org.fusesource.examples/payment-service-shared/${project.version}</bundle>
        <bundle>mvn:org.fusesource.examples/payment-service-ws/${project.version}</bundle>
    </feature>

    <feature name='payment-service-batch' version='${project.version}'>
        <feature version="${servicemix.version}">camel-nmr</feature>
        <bundle>mvn:org.fusesource.examples/payment-service-batch/${project.version}</bundle>
    </feature>

    <!--
            Work around issue - https://issues.apache.org/activemq/browse/CAMEL-3287
    -->
    <feature name='camel-cxf-patch' version='2.4.0-fuse-01-00'>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-pool/1.5.4_1</bundle>
        <bundle>mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle>
        <bundle>mvn:org.springframework/spring-jms/3.0.3.RELEASE</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.asm/2.2.3_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.fastinfoset/1.2.7_2</bundle>
        <bundle>mvn:org.apache.geronimo.specs/geronimo-servlet_2.5_spec/1.1.2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jetty-bundle/6.1.22_1-fuse</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jdom/1.1_2</bundle>
        <bundle>mvn:commons-codec/commons-codec/1.4</bundle>
        <bundle>mvn:org.codehaus.jettison/jettison/1.2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.ant/1.7.0_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.bcel/5.2_2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xalan/2.7.1_2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xerces/2.9.1_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlbeans/2.4.0_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlsec/1.4.3_2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlresolver/1.2_2</bundle>
        <bundle>mvn:org.codehaus.woodstox/woodstox-core-asl/4.0.7</bundle>
        <bundle>mvn:org.codehaus.woodstox/stax2-api/3.0.1</bundle>
        <bundle>mvn:org.apache.ws.commons.schema/XmlSchema/1.4.5</bundle>
        <bundle>mvn:commons-lang/commons-lang/2.4</bundle>
        <bundle>mvn:commons-collections/commons-collections/3.2.1</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.antlr/2.7.7_2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.oro/2.0.8_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.velocity/1.6.2_3</bundle>
        <bundle>mvn:javax.mail/mail/1.4.3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.neethi/2.0.4_2</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.abdera/0.4.0-incubating_3</bundle>
        <bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jaxws-api-2.1/1.5.0</bundle>
        <bundle>mvn:org.apache.geronimo.specs/geronimo-annotation_1.0_spec/1.1.1</bundle>
        <bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.saaj-api-1.3/1.5.0</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.saaj-impl/1.3.2_1</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.wsdl4j/1.6.2_2</bundle>
        <bundle>mvn:org.apache.ws.security/wss4j/1.5.8</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.opensaml/1.1_3</bundle>
        <bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jsr311-api-1.0/1.5.0</bundle>
        <bundle>mvn:org.apache.geronimo.specs/geronimo-ws-metadata_2.0_spec/1.1.2</bundle>
        <bundle>mvn:org.apache.cxf/cxf-bundle/2.2.10-fuse-00-00</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-io/1.3.2_3</bundle>
        <feature version='2.4.0-fuse-01-00'>camel-spring</feature>

<!--
        <feature version='2.4.0-fuse-01-00'>http</feature>
-->
        <feature version='2.0.0-fuse-01-00'>http</feature>

        <bundle>mvn:org.apache.camel/camel-cxf/2.4.0-fuse-01-00</bundle>
    </feature>
</features>
